<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Citizenship Toolkit - Kunsthall Stavanger</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.min.js"></script>
</head>

<body>
    <button id="rotate-btn">↻</button>
    <main id="library">
        <div class="storage" id="deg_0">
            <div class="entry" id="en-1-1"><a href="what-we-hold-sacred">What We Hold Sacred: A workshop on
                    altar-Making</a></div>
            <div class="entry" id="en-1-2" data-hover-text=""><a href="hey-hey-look-at-me">Hey, Hey, Look at Me!: Lex
                    Brown on Clowns, Citizenship, and the Power of Play</a></div>
            <div class="entry" id="en-1-3"><a href="foreword-lee">Foreword, Lee Heinemann</a></div>
            <div class="brick" id="brk-1-1">

            </div>
            <div class="brick" id="brk-1-2"></div>
            <div class="brick" id="brk-1-3"></div>
        </div>
        <div class="storage" id="deg_90">
            <div class="entry" id="en-2-1">Musics from Alchemy</div>
            <div class="entry" id="en-2-2"><a href="self-as-archive">Self as Archive: A workshop on Erasure +
                    World-Building</a></div>
            <div class="entry" id="en-2-3"></div>
            <div class="entry" id="en-2-4"><a href="youth-workers">How Youth Workers Create Meaningful Encounters for
                    Young People</a></div>
            <div class="brick" id="brk-2-1"></div>
        </div>
        <div class="storage" id="deg_180">
            <div class="entry" id="en-3-1"><a href="foreword-kristina">Foreword, Kristina Ketola Bore</a></div>
            <div class="entry" id="en-3-2"><a href="are-you-listening">Are You Listening? Deep Listening as Youth
                    Pedagogy</a></div>
            <div class="entry" id="en-3-3"><a href="contributor.html">Contributors</a></div>
            <div class="brick" id="brk-3-1"></div>
            <div class="brick" id="brk-3-2"></div>
        </div>
        <div class="storage" id="deg_270">
            <div class="entry" id="en-4-1"><a href="let-me-be-for-you">Let Me Be for You What I Needed When I Was Your
                    Age</a></div>
            <div class="entry" id="en-4-2">Music Videos from Alchemy</div>
            <div class="entry" id="en-4-3"></div>
            <div class="entry" id="en-4-4"><a href="a-space-for-agency">A Space for Agency: Walk of Shame on Cultivating
                    Collective Care in Education</a>
            </div>
            <div class="brick" id="brk-4-1">
            </div>
        </div>
        </div>
        <div id="hover-wrapper">
            <div class="quote" id="quote"></div>
            <div class="q-text" id="q-text"></div>
        </div>
    </main>
    <aside>
        <div class="top">
            <div id="home">
                <h3>Mobile</h3>
                <h3>Citizenship</h3>
                <h3>Toolkit</h3>
            </div>
        </div>

        <div class="bottom">
            <div id="about">
                <div class="drag-handle">
                    <span></span>
                    <span></span>
                </div>
                <div id="cred-line">This toolkit is produced by Kunsthall Stavanger</div>
            </div>
            <div class="summary"><b>Mobilizing Citizenship (MC)</b> was an educational and research project that ran
                from 2018 to 2024. Throughout the project, Norwegian and international artists and designers were
                invited to collaborate with groups of young people aged 12–16 at <a
                    href="https://kunsthallstavanger.no/"><img src="assets/ks-logo.svg"></a>. Each term explored how
                participants could use tools and methods from contemporary art to express themselves and make their
                voices heard.
                <br><br>
                This toolkit is a result of that work, capturing the knowledge, experiences, and reflections developed
                over the course of the project.

            </div>
        </div>

    </aside>
    <audio src="assets/knock.wav" class="sound" id="knock-sound"></audio>
    <audio src="https://raw.githubusercontent.com/cartalan/Xilofono-Exercise/master/sound/1-DO.mp3" class="sound"
        id="sound1"></audio>
    <audio src="https://raw.githubusercontent.com/cartalan/Xilofono-Exercise/master/sound/2-RE.mp3" class="sound"
        id="sound2"></audio>
    <audio src="https://raw.githubusercontent.com/cartalan/Xilofono-Exercise/master/sound/3-MI.mp3" class="sound"
        id="sound3"></audio>
    <audio src="https://raw.githubusercontent.com/cartalan/Xilofono-Exercise/master/sound/4-FA.mp3" class="sound"
        id="sound4"></audio>
    <audio src="https://raw.githubusercontent.com/cartalan/Xilofono-Exercise/master/sound/5-SOL.mp3" class="sound"
        id="sound5"></audio>
    <audio src="https://raw.githubusercontent.com/cartalan/Xilofono-Exercise/master/sound/6-LA.mp3" class="sound"
        id="sound6"></audio>
    <audio src="https://raw.githubusercontent.com/cartalan/Xilofono-Exercise/master/sound/7-SI.mp3" class="sound"
        id="sound7"></audio>
    <audio src="https://raw.githubusercontent.com/cartalan/Xilofono-Exercise/master/sound/8-DO.mp3" class="sound"
        id="sound8"></audio>

    <script>
        $(function () {
            /* ===== Rotation Button ===== */
            const $rotateBtn = $('#rotate-btn');
            const $library = $('#library');
            let currentRotation = 0;

            $rotateBtn.on('click', () => {
                currentRotation += 90;
                $library.css('transform', `rotate(${currentRotation}deg)`);
                $rotateBtn.css('transform', `translate(-50%, -50%) rotate(${-currentRotation}deg)`);
            });

            /* ===== Populate Empty Entry Interactions ===== */
            function setupEmptyEntryInteractions() {
                const knockSound = $('#knock-sound')[0];
                $('.entry:empty, .brick:empty').each(function () {
                    let played = false;
                    $(this).on('mouseenter', () => {
                        if (!played) {
                            knockSound.currentTime = 0;
                            knockSound.play();
                            played = true;
                            setTimeout(() => played = false, knockSound.duration * 1000 || 1000);
                        }
                    });
                });
            }

            setupEmptyEntryInteractions();

            /* ===== Quote Hover Texts ===== */
            const entryTexts = {
                'en-1-1': 'Quote text for an introduction to the publication from MC contributors',
                'en-1-2': 'Quote text for an introduction to the publication from MC contributors',
                'en-1-3': 'Quote text for an introduction to the publication from MC contributors',
                'en-2-1': 'Quote text for an introduction to the publication from MC contributors',
                'en-2-2': 'Quote text for an introduction to the publication from MC contributors',
                'en-3-1': 'Quote text for an introduction to the publication from MC contributors',
                'en-3-2': 'Quote text for an introduction to the publication from MC contributors',
                'en-3-3': 'Quote text for an introduction to the publication from MC contributors',
                'en-4-1': 'Quote text for an introduction to the publication from MC contributors',
                'en-4-2': 'Quote text for an introduction to the publication from MC contributors',
                'en-4-4': 'Quote text for an introduction to the publication from MC contributors'
            };

            $('.entry').hover(
                function () {
                    const $link = $(this).find('a');
                    $('#quote').text($link.length ? $link.text() : $(this).text());
                    $('#q-text').text(entryTexts[this.id] || '');
                },
                function () {
                    $('#quote').text('');
                    $('#q-text').text('');
                }
            );

            /* ===== Xylophone Effect ===== */
            function setupXylophoneEffect() {
                const homeWords = $('#home h3');
                const sounds = [1, 2, 3, 4, 5, 6, 7, 8].map(i => document.getElementById(`sound${i}`));
                let soundCounter = 0;

                homeWords.each(function () {
                    const $word = $(this);
                    const text = $word.text();
                    $word.empty();

                    for (let i = 0; i < text.length; i++) {
                        const $letter = $('<span>').addClass('letter').text(text[i]);
                        const soundIndex = soundCounter % sounds.length;
                        $letter.on('mouseenter', () => {
                            sounds[soundIndex].currentTime = 0;
                            sounds[soundIndex].play();
                        });
                        $word.append($letter);
                        soundCounter++;
                    }
                });
            }

            setupXylophoneEffect();

            /* ===== Mobile Toggles ===== */
            function setupMobileToggles() {
                const $home = $('#home');
                const $top = $('.top');
                const $contributorBrick = $('#brk-1-1');
                const $creditsBrick = $('#brk-4-1');

                function resetBricks() {
                    if ($contributorBrick.length) $contributorBrick.removeClass('active').html('Contributors');
                    if ($creditsBrick.length) $creditsBrick.removeClass('active').html('Credits');
                }

                $home.on('click', e => {
                    if (window.innerWidth <= 768) {
                        e.stopPropagation();
                        $top.toggleClass('active');
                        resetBricks();
                    }
                });

                $contributorBrick.add($creditsBrick).each(function () {
                    $(this).on('click', e => {
                        if (window.innerWidth <= 768) {
                            e.stopPropagation();
                            $(this).toggleClass('active');
                            $(this).html($(this).hasClass('active') ? this.dataset.hoverText : this.id.includes('contributor') ? 'Contributors' : 'Credits');
                            $top.removeClass('active');
                        }
                    });
                });

                $(document).on('click', e => {
                    if (window.innerWidth <= 768) {
                        if (!$home.is(e.target) && !$top.is(e.target)) $top.removeClass('active');
                        if ($contributorBrick.length && !$contributorBrick.is(e.target) && $contributorBrick.hasClass('active')) $contributorBrick.removeClass('active').html('Contributors');
                        if ($creditsBrick.length && !$creditsBrick.is(e.target) && $creditsBrick.hasClass('active')) $creditsBrick.removeClass('active').html('Credits');
                    }
                });
            }

            setupMobileToggles();

            /* ===== Draggable About Section ===== */
            function initAboutDraggable() {
                const $bottom = $('.bottom');
                const $about = $('#about');
                const topstop = $(window).height() / 13 * 5;
                const bottomstop = $(window).height() / 13 * 12 - 2.5;

                if ($about.data('ui-draggable')) $about.draggable('destroy');

                $about.draggable({
                    axis: 'y',
                    containment: [0, topstop, 0, bottomstop]
                });
            }

            initAboutDraggable();
            $(window).on('resize', initAboutDraggable);

        });
    </script>
</body>

</html>